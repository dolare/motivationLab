/*!  1.4.16 2017-05-02 16:17 */
CHARITABLE=window.CHARITABLE||{},function(a){var b="",c=function(a){var c=a.target.value,d=/^3(4|7)/.test(c),e=d?17:19,f=this.selectionStart,g="";c.split("").forEach(function(a){var b=g.length;if(d)if(4!==b&&11!==b||" "===a){if(4!==b&&11!==b&&" "===a)return}else g+=" ",f===b+1&&f++;else if((b+1)%5===0&&" "!==a)g+=" ",f===b+1&&f++;else if((b+1)%5!==0&&" "===a)return;g+=a}),/[^\d^\s]/.test(c)||c.length>e?(a.target.value=b,this.setSelectionRange(f-1,f-1)):(b=a.target.value=g,this.setSelectionRange(f,f))};CHARITABLE.Donation_Form.prototype.is_valid_card_number=function(){var a=function(a){return function(b){for(var c,d=b.length,e=1,f=0;d;)c=parseInt(b.charAt(--d),10),f+=(e^=1)?a[c]:c;return f&&0===f%10}}([0,2,4,6,8,1,3,5,7,9]),b=this.get_cc_number().replace(/ /g,"");return a(b)},CHARITABLE.Donation_Form.prototype.validate_card_number=function(){var b=a("#charitable-gateway-fields-"+this.get_payment_method()+" #charitable_field_cc_number");return 0===b.length||(!1!==this.is_valid_card_number()||(this.add_error(CHARITABLE_VARS.error_invalid_cc_number),!1))};var d=a("body");d.on("charitable:form:initialize",function(){d.on("input",'input[name="cc_number"]',c)}),d.on("charitable:form:validate",function(a,b){b.validate_card_number()})}(jQuery);